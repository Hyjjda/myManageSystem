import{a as Ie,ak as Ge,s as ae,b as Ze,i as ne,aY as qe,aX as Je,d as M,q as c,W as Qe,c5 as _e,_ as et,e as tt,aM as ot,G as at,u as Ce,as as se,ag as nt,w as ie,N as F,H as st,C as it,o as p,g as E,T as f,$ as le,m as v,k as o,l as Z,Y as L,h as I,j as H,r as A,E as j,S as Ne,Z as re,a$ as ue,aj as q,n as ze,p as de,cj as lt,cA as rt,cB as ut,ah as dt,br as pt,ad as Pe,D as ct}from"./index-C0YSzdoM.js";import{m as ft}from"./typescript-Bp3YSIOJ.js";import{u as mt}from"./aria-Cl9uGz3Y.js";import{U as J,d as Me,I as pe,C as ke}from"./event-DYMifAw6.js";import{u as vt,a as yt}from"./el-button-CTMz-c1B.js";import{u as ht,a as gt}from"./use-form-common-props-DGImsqfa.js";import{u as bt,a as wt}from"./index-AkxRptXk.js";let h;const xt={height:"0",visibility:"hidden",overflow:Ge()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},St=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Te=n=>{const r=Number.parseFloat(n);return Number.isNaN(r)?n:r};function Et(n){const r=window.getComputedStyle(n),w=r.getPropertyValue("box-sizing"),t=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),l=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:St.map(d=>[d,r.getPropertyValue(d)]),paddingSize:t,borderSize:l,boxSizing:w}}function Ve(n,r=1,w){var t,l;h||(h=document.createElement("textarea"),((t=n.parentNode)!=null?t:document.body).appendChild(h));const{paddingSize:u,borderSize:d,boxSizing:m,contextStyle:x}=Et(n);x.forEach(([y,O])=>h?.style.setProperty(y,O)),Object.entries(xt).forEach(([y,O])=>h?.style.setProperty(y,O,"important")),h.value=n.value||n.placeholder||"";let g=h.scrollHeight;const C={};m==="border-box"?g=g+d:m==="content-box"&&(g=g-u),h.value="";const b=h.scrollHeight-u;if(Ie(r)){let y=b*r;m==="border-box"&&(y=y+u+d),g=Math.max(y,g),C.minHeight=`${y}px`}if(Ie(w)){let y=b*w;m==="border-box"&&(y=y+u+d),g=Math.min(y,g)}return C.height=`${g}px`,(l=h.parentNode)==null||l.removeChild(h),h=void 0,C}const It=Ze({id:{type:String,default:void 0},size:Je,disabled:{type:Boolean,default:void 0},modelValue:{type:M([String,Number,Object]),default:""},modelModifiers:{type:M(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:M(String),default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:M([Boolean,Object]),default:!1},autocomplete:{type:M(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:ne,default:qe},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:ne},prefixIcon:{type:ne},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:M([Object,Array,String]),default:()=>ft({})},autofocus:Boolean,rows:{type:Number,default:2},...mt(["ariaLabel"]),inputmode:{type:M(String),default:void 0},name:String}),Ct={[J]:n=>ae(n),input:n=>ae(n),change:(n,r)=>ae(n)&&(r instanceof Event||r===void 0),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},Nt=["class","style"],zt=/^on[A-Z]/,Pt=(n={})=>{const{excludeListeners:r=!1,excludeKeys:w}=n,t=c(()=>(w?.value||[]).concat(Nt)),l=Qe();return l?c(()=>{var u;return _e(Object.entries((u=l.proxy)==null?void 0:u.$attrs).filter(([d])=>!t.value.includes(d)&&!(r&&zt.test(d))))}):c(()=>({}))};function Mt(n){let r;function w(){if(n.value==null)return;const{selectionStart:l,selectionEnd:u,value:d}=n.value;if(l==null||u==null)return;const m=d.slice(0,Math.max(0,l)),x=d.slice(Math.max(0,u));r={selectionStart:l,selectionEnd:u,value:d,beforeTxt:m,afterTxt:x}}function t(){if(n.value==null||r==null)return;const{value:l}=n.value,{beforeTxt:u,afterTxt:d,selectionStart:m}=r;if(u==null||d==null||m==null)return;let x=l.length;if(l.endsWith(d))x=l.length-d.length;else if(l.startsWith(u))x=u.length;else{const g=u[m-1],C=l.indexOf(g,m-1);C!==-1&&(x=C+1)}n.value.setSelectionRange(x,x)}return[w,t]}const kt=["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode"],Tt=["id","name","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role"],Vt="ElInput",Ft=tt({name:Vt,inheritAttrs:!1,__name:"input",props:It,emits:Ct,setup(n,{expose:r,emit:w}){const t=n,l=w,u=ot(),d=Pt(),m=at(),x=c(()=>[t.type==="textarea"?ce.b():s.b(),s.m(O.value),s.is("disabled",z.value),s.is("exceed",$e.value),{[s.b("group")]:m.prepend||m.append,[s.m("prefix")]:m.prefix||t.prefixIcon,[s.m("suffix")]:m.suffix||t.suffixIcon||t.clearable||t.showPassword,[s.bm("suffix","password-clear")]:U.value&&ee.value,[s.b("hidden")]:t.type==="hidden"},u.class]),g=c(()=>[s.e("wrapper"),s.is("focus",_.value)]),{form:C,formItem:b}=vt(),{inputId:y}=yt(t,{formItemContext:b}),O=ht(),z=gt(),s=Ce("input"),ce=Ce("textarea"),D=se(),N=se(),Q=de(!1),K=de(!1),fe=de(),W=se(t.inputStyle),S=c(()=>D.value||N.value),{wrapperRef:Fe,isFocused:_,handleFocus:me,handleBlur:ve}=bt(S,{disabled:z,afterBlur(){var e;t.validateEvent&&((e=b?.validate)==null||e.call(b,"blur").catch(a=>Me()))}}),ye=c(()=>{var e;return(e=C?.statusIcon)!=null?e:!1}),$=c(()=>b?.validateState||""),he=c(()=>$.value&&lt[$.value]),Le=c(()=>K.value?rt:ut),Oe=c(()=>[u.style]),ge=c(()=>[t.inputStyle,W.value,{resize:t.resize}]),P=c(()=>dt(t.modelValue)?"":String(t.modelValue)),U=c(()=>t.clearable&&!z.value&&!t.readonly&&!!P.value&&(_.value||Q.value)),ee=c(()=>t.showPassword&&!z.value&&!!P.value),k=c(()=>t.showWordLimit&&!!t.maxlength&&(t.type==="text"||t.type==="textarea")&&!z.value&&!t.readonly&&!t.showPassword),te=c(()=>P.value.length),$e=c(()=>!!k.value&&te.value>Number(t.maxlength)),Re=c(()=>!!m.suffix||!!t.suffixIcon||U.value||t.showPassword||k.value||!!$.value&&ye.value),Be=c(()=>!!Object.keys(t.modelModifiers).length),[He,Ae]=Mt(D);nt(N,e=>{if(je(),!k.value||t.resize!=="both"&&t.resize!=="horizontal")return;const a=e[0],{width:i}=a.contentRect;fe.value={right:`calc(100% - ${i+22-10}px)`}});const R=()=>{const{type:e,autosize:a}=t;if(!(!pt||e!=="textarea"||!N.value))if(a){const i=Pe(a)?a.minRows:void 0,V=Pe(a)?a.maxRows:void 0,B=Ve(N.value,i,V);W.value={overflowY:"hidden",...B},F(()=>{N.value.offsetHeight,W.value=B})}else W.value={minHeight:Ve(N.value).minHeight}},je=(e=>{let a=!1;return()=>{var i;if(a||!t.autosize)return;((i=N.value)==null?void 0:i.offsetParent)===null||(setTimeout(e),a=!0)}})(R),T=()=>{const e=S.value,a=t.formatter?t.formatter(P.value):P.value;!e||e.value===a||t.type==="file"||(e.value=a)},be=e=>{const{trim:a,number:i}=t.modelModifiers;return a&&(e=e.trim()),i&&(e=`${Te(e)}`),t.formatter&&t.parser&&(e=t.parser(e)),e},oe=async e=>{if(xe.value)return;const{lazy:a}=t.modelModifiers;let{value:i}=e.target;if(a){l(pe,i);return}if(i=be(i),String(i)===P.value){t.formatter&&T();return}He(),l(J,i),l(pe,i),await F(),(t.formatter&&t.parser||!Be.value)&&T(),Ae()},we=async e=>{let{value:a}=e.target;a=be(a),t.modelModifiers.lazy&&l(J,a),l(ke,a,e),await F(),T()},{isComposing:xe,handleCompositionStart:Y,handleCompositionUpdate:X,handleCompositionEnd:G}=wt({emit:l,afterComposition:oe}),De=()=>{K.value=!K.value},Ke=()=>{var e;return(e=S.value)==null?void 0:e.focus()},We=()=>{var e;return(e=S.value)==null?void 0:e.blur()},Ue=e=>{Q.value=!1,l("mouseleave",e)},Ye=e=>{Q.value=!0,l("mouseenter",e)},Se=e=>{l("keydown",e)},Xe=()=>{var e;(e=S.value)==null||e.select()},Ee=()=>{l(J,""),l(ke,""),l("clear"),l(pe,"")};return ie(()=>t.modelValue,()=>{var e;F(()=>R()),t.validateEvent&&((e=b?.validate)==null||e.call(b,"change").catch(a=>Me()))}),ie(P,e=>{if(!S.value)return;const{trim:a,number:i}=t.modelModifiers,V=S.value.value,B=(i||t.type==="number")&&!/^0\d/.test(V)?`${Te(V)}`:V;B!==e&&(document.activeElement===S.value&&S.value.type!=="range"&&a&&B.trim()===e||T())}),ie(()=>t.type,async()=>{await F(),T(),R()}),st(()=>{!t.formatter&&t.parser,T(),F(R)}),r({input:D,textarea:N,ref:S,textareaStyle:ge,autosize:it(t,"autosize"),isComposing:xe,focus:Ke,blur:We,select:Xe,clear:Ee,resizeTextarea:R}),(e,a)=>(p(),E("div",{class:v([x.value,{[o(s).bm("group","append")]:e.$slots.append,[o(s).bm("group","prepend")]:e.$slots.prepend}]),style:ze(Oe.value),onMouseenter:Ye,onMouseleave:Ue},[f(" input "),e.type!=="textarea"?(p(),E(le,{key:0},[f(" prepend slot "),e.$slots.prepend?(p(),E("div",{key:0,class:v(o(s).be("group","prepend"))},[Z(e.$slots,"prepend")],2)):f("v-if",!0),L("div",{ref_key:"wrapperRef",ref:Fe,class:v(g.value)},[f(" prefix slot "),e.$slots.prefix||e.prefixIcon?(p(),E("span",{key:0,class:v(o(s).e("prefix"))},[L("span",{class:v(o(s).e("prefix-inner"))},[Z(e.$slots,"prefix"),e.prefixIcon?(p(),I(o(j),{key:0,class:v(o(s).e("icon"))},{default:H(()=>[(p(),I(A(e.prefixIcon)))]),_:1},8,["class"])):f("v-if",!0)],2)],2)):f("v-if",!0),L("input",Ne({id:o(y),ref_key:"input",ref:D,class:o(s).e("inner")},o(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?K.value?"text":"password":e.type,disabled:o(z),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:a[0]||(a[0]=(...i)=>o(Y)&&o(Y)(...i)),onCompositionupdate:a[1]||(a[1]=(...i)=>o(X)&&o(X)(...i)),onCompositionend:a[2]||(a[2]=(...i)=>o(G)&&o(G)(...i)),onInput:oe,onChange:we,onKeydown:Se}),null,16,kt),f(" suffix slot "),Re.value?(p(),E("span",{key:1,class:v(o(s).e("suffix"))},[L("span",{class:v(o(s).e("suffix-inner"))},[!U.value||!ee.value||!k.value?(p(),E(le,{key:0},[Z(e.$slots,"suffix"),e.suffixIcon?(p(),I(o(j),{key:0,class:v(o(s).e("icon"))},{default:H(()=>[(p(),I(A(e.suffixIcon)))]),_:1},8,["class"])):f("v-if",!0)],64)):f("v-if",!0),U.value?(p(),I(o(j),{key:1,class:v([o(s).e("icon"),o(s).e("clear")]),onMousedown:re(o(ue),["prevent"]),onClick:Ee},{default:H(()=>[(p(),I(A(e.clearIcon)))]),_:1},8,["class","onMousedown"])):f("v-if",!0),ee.value?(p(),I(o(j),{key:2,class:v([o(s).e("icon"),o(s).e("password")]),onClick:De,onMousedown:re(o(ue),["prevent"]),onMouseup:re(o(ue),["prevent"])},{default:H(()=>[(p(),I(A(Le.value)))]),_:1},8,["class","onMousedown","onMouseup"])):f("v-if",!0),k.value?(p(),E("span",{key:3,class:v([o(s).e("count"),o(s).is("outside",e.wordLimitPosition==="outside")])},[L("span",{class:v(o(s).e("count-inner"))},q(te.value)+" / "+q(e.maxlength),3)],2)):f("v-if",!0),$.value&&he.value&&ye.value?(p(),I(o(j),{key:4,class:v([o(s).e("icon"),o(s).e("validateIcon"),o(s).is("loading",$.value==="validating")])},{default:H(()=>[(p(),I(A(he.value)))]),_:1},8,["class"])):f("v-if",!0)],2)],2)):f("v-if",!0)],2),f(" append slot "),e.$slots.append?(p(),E("div",{key:1,class:v(o(s).be("group","append"))},[Z(e.$slots,"append")],2)):f("v-if",!0)],64)):(p(),E(le,{key:1},[f(" textarea "),L("textarea",Ne({id:o(y),ref_key:"textarea",ref:N,class:[o(ce).e("inner"),o(s).is("focus",o(_))]},o(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:o(z),readonly:e.readonly,autocomplete:e.autocomplete,style:ge.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:a[3]||(a[3]=(...i)=>o(Y)&&o(Y)(...i)),onCompositionupdate:a[4]||(a[4]=(...i)=>o(X)&&o(X)(...i)),onCompositionend:a[5]||(a[5]=(...i)=>o(G)&&o(G)(...i)),onInput:oe,onFocus:a[6]||(a[6]=(...i)=>o(me)&&o(me)(...i)),onBlur:a[7]||(a[7]=(...i)=>o(ve)&&o(ve)(...i)),onChange:we,onKeydown:Se}),null,16,Tt),k.value?(p(),E("span",{key:0,style:ze(fe.value),class:v([o(s).e("count"),o(s).is("outside",e.wordLimitPosition==="outside")])},q(te.value)+" / "+q(e.maxlength),7)):f("v-if",!0)],64))],38))}});var Lt=et(Ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Kt=ct(Lt);export{Kt as E,Pt as u};
