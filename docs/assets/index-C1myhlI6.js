import{b as X,d as $,_ as Y,e as K,u as be,o as f,g as P,l as D,v as F,j as M,a6 as Q,Y as A,n as ee,m as g,k as i,z as he,aj as se,a7 as te,a1 as ne,q as d,a as C,t as G,D as Ce,i as Te,br as oe,cw as ae,bP as we,H as Se,w as Ee,L as Ne,ag as Be,h,T as B,E as q,r as ke,$ as Me,Z as $e,b6 as Ie,p as k,a8 as Le,N as xe,b5 as J,J as Oe,X as Pe,s as H,x as le,aG as z,bJ as W,bN as De,bd as O,bn as Ae,cx as ze}from"./index-C0YSzdoM.js";import{m as Fe}from"./typescript-Bp3YSIOJ.js";const He=X({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:$([String,Object,Array])},offset:{type:$(Array),default:[0,0]},badgeClass:{type:String}}),_e=K({name:"ElBadge",__name:"badge",props:He,setup(s,{expose:a}){const e=s,n=be("badge"),t=d(()=>e.isDot?"":C(e.value)&&C(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`),c=d(()=>{var o;return[{backgroundColor:e.color,marginRight:G(-e.offset[0]),marginTop:G(e.offset[1])},(o=e.badgeStyle)!=null?o:{}]});return a({content:t}),(o,l)=>(f(),P("div",{class:g(i(n).b())},[D(o.$slots,"default"),F(ne,{name:`${i(n).namespace.value}-zoom-in-center`,persisted:""},{default:M(()=>[Q(A("sup",{class:g([i(n).e("content"),i(n).em("content",o.type),i(n).is("fixed",!!o.$slots.default),i(n).is("dot",o.isDot),i(n).is("hide-zero",!o.showZero&&o.value===0),o.badgeClass]),style:ee(c.value)},[D(o.$slots,"content",{value:t.value},()=>[he(se(t.value),1)])],6),[[te,!o.hidden&&(t.value||o.isDot||o.$slots.content)]])]),_:3},8,["name"])],2))}});var Re=Y(_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const Ue=Ce(Re),p={placement:"top"},re=["primary","success","info","warning","error"],ie=["top","top-left","top-right","bottom","bottom-left","bottom-right"],T="top",u=Fe({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,placement:void 0,zIndex:0,grouping:!1,repeatNum:1,appendTo:oe?document.body:void 0}),Ve=X({customClass:{type:String,default:u.customClass},dangerouslyUseHTMLString:{type:Boolean,default:u.dangerouslyUseHTMLString},duration:{type:Number,default:u.duration},icon:{type:Te,default:u.icon},id:{type:String,default:u.id},message:{type:$([String,Object,Function]),default:u.message},onClose:{type:$(Function),default:u.onClose},showClose:{type:Boolean,default:u.showClose},type:{type:String,values:re,default:u.type},plain:{type:Boolean,default:u.plain},offset:{type:Number,default:u.offset},placement:{type:String,values:ie,default:u.placement},zIndex:{type:Number,default:u.zIndex},grouping:{type:Boolean,default:u.grouping},repeatNum:{type:Number,default:u.repeatNum}}),Ze={destroy:()=>!0},m=ae({}),je=s=>(m[s]||(m[s]=ae([])),m[s]),Ge=(s,a)=>{const e=m[a]||[],n=e.findIndex(o=>o.id===s),t=e[n];let c;return n>0&&(c=e[n-1]),{current:t,prev:c}},qe=(s,a)=>{const{prev:e}=Ge(s,a);return e?e.vm.exposed.bottom.value:0},Je=(s,a,e)=>(m[e]||[]).findIndex(c=>c.id===s)>0?16:a,We=["id"],Xe=["innerHTML"],Ye=K({name:"ElMessage",__name:"message",props:Ve,emits:Ze,setup(s,{expose:a,emit:e}){const{Close:n}=Ie,t=s,c=e,o=k(!1),{ns:l,zIndex:w}=we("message"),{currentZIndex:_,nextZIndex:S}=w,I=k(),E=k(!1),R=k(0);let L;const ue=d(()=>t.type?t.type==="error"?"danger":t.type:"info"),pe=d(()=>{const r=t.type;return{[l.bm("icon",r)]:r&&J[r]}}),U=d(()=>t.icon||J[t.type]||""),y=d(()=>t.placement||T),de=d(()=>qe(t.id,y.value)),V=d(()=>Je(t.id,t.offset,y.value)+de.value),me=d(()=>R.value+V.value),fe=d(()=>y.value.includes("left")?l.is("left"):y.value.includes("right")?l.is("right"):l.is("center")),Z=d(()=>y.value.startsWith("top")?"top":"bottom"),ge=d(()=>({[Z.value]:`${V.value}px`,zIndex:_.value}));function x(){t.duration!==0&&({stop:L}=Le(()=>{N()},t.duration))}function j(){L?.()}function N(){E.value=!1,xe(()=>{var r;o.value||((r=t.onClose)==null||r.call(t),c("destroy"))})}function ve(r){Oe(r)===Pe.esc&&N()}return Se(()=>{x(),S(),E.value=!0}),Ee(()=>t.repeatNum,()=>{j(),x()}),Ne(document,"keydown",ve),Be(I,()=>{R.value=I.value.getBoundingClientRect().height}),a({visible:E,bottom:me,close:N}),(r,b)=>(f(),h(ne,{name:i(l).b("fade"),onBeforeEnter:b[0]||(b[0]=ye=>o.value=!0),onBeforeLeave:r.onClose,onAfterLeave:b[1]||(b[1]=ye=>r.$emit("destroy")),persisted:""},{default:M(()=>[Q(A("div",{id:r.id,ref_key:"messageRef",ref:I,class:g([i(l).b(),{[i(l).m(r.type)]:r.type},i(l).is("closable",r.showClose),i(l).is("plain",r.plain),i(l).is("bottom",Z.value==="bottom"),fe.value,r.customClass]),style:ee(ge.value),role:"alert",onMouseenter:j,onMouseleave:x},[r.repeatNum>1?(f(),h(i(Ue),{key:0,value:r.repeatNum,type:ue.value,class:g(i(l).e("badge"))},null,8,["value","type","class"])):B("v-if",!0),U.value?(f(),h(i(q),{key:1,class:g([i(l).e("icon"),pe.value])},{default:M(()=>[(f(),h(ke(U.value)))]),_:1},8,["class"])):B("v-if",!0),D(r.$slots,"default",{},()=>[r.dangerouslyUseHTMLString?(f(),P(Me,{key:1},[B(" Caution here, message could've been compromised, never use user's input as message "),A("p",{class:g(i(l).e("content")),innerHTML:r.message},null,10,Xe)],2112)):(f(),P("p",{key:0,class:g(i(l).e("content"))},se(r.message),3))]),r.showClose?(f(),h(i(q),{key:2,class:g(i(l).e("closeBtn")),onClick:$e(N,["stop"])},{default:M(()=>[F(i(n))]),_:1},8,["class"])):B("v-if",!0)],46,We),[[te,E.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Ke=Y(Ye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let Qe=1;const es=s=>{if(!s.appendTo)s.appendTo=document.body;else if(H(s.appendTo)){let e=document.querySelector(s.appendTo);De(e)||(e=document.body),s.appendTo=e}},ss=s=>{!s.placement&&H(p.placement)&&p.placement&&(s.placement=p.placement),s.placement||(s.placement=T),ie.includes(s.placement)||(s.placement=T)},ce=s=>{const a=!s||H(s)||le(s)||z(s)?{message:s}:s,e={...u,...a};return es(e),ss(e),O(p.grouping)&&!e.grouping&&(e.grouping=p.grouping),C(p.duration)&&e.duration===3e3&&(e.duration=p.duration),C(p.offset)&&e.offset===16&&(e.offset=p.offset),O(p.showClose)&&!e.showClose&&(e.showClose=p.showClose),O(p.plain)&&!e.plain&&(e.plain=p.plain),e},ts=s=>{const a=s.props.placement||T,e=m[a],n=e.indexOf(s);if(n===-1)return;e.splice(n,1);const{handler:t}=s;t.close()},ns=({appendTo:s,...a},e)=>{const n=`message_${Qe++}`,t=a.onClose,c=document.createElement("div"),o={...a,id:n,onClose:()=>{t?.(),ts(S)},onDestroy:()=>{W(null,c)}},l=F(Ke,o,z(o.message)||le(o.message)?{default:z(o.message)?o.message:()=>o.message}:null);l.appContext=e||v._context,W(l,c),s.appendChild(c.firstElementChild);const w=l.component,S={id:n,vnode:l,vm:w,handler:{close:()=>{w.exposed.close()}},props:l.component.props};return S},v=(s={},a)=>{if(!oe)return{close:()=>{}};const e=ce(s),n=je(e.placement||T);if(e.grouping&&n.length){const c=n.find(({vnode:o})=>{var l;return((l=o.props)==null?void 0:l.message)===e.message});if(c)return c.props.repeatNum+=1,c.props.type=e.type,c.handler}if(C(p.max)&&n.length>=p.max)return{close:()=>{}};const t=ns(e,a);return n.push(t),t.handler};re.forEach(s=>{v[s]=(a={},e)=>{const n=ce(a);return v({...n,type:s},e)}});function os(s){for(const a in m)if(Ae(m,a)){const e=[...m[a]];for(const n of e)(!s||s===n.props.type)&&n.handler.close()}}function as(s){if(!m[s])return;[...m[s]].forEach(e=>e.handler.close())}v.closeAll=os;v.closeAllByPlacement=as;v._context=null;const is=ze(v,"$message");export{Ue as E,is as a};
