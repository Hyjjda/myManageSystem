import{H as Z,ab as _,I as x,p as S,t as O,_ as K,e as W,V as ee,f as U,o as M,g as N,Y as A,l as $,m as b,k as e,aj as oe,v as Y,j as C,h as j,r as se,bm as te,E as ae,T as q,n as G,q as F,G as le,u as ne,a1 as re,S as V,a6 as ie,R as de,a7 as ce,A as ue,D as fe}from"./index-B3l0UY6M.js";import{b as me,c as pe,e as J,d as ve,a as ge,u as he,E as be,f as Ce}from"./el-overlay-0rYCd4YG.js";import{F as ye,d as we,f as Ee}from"./el-popper-DFxRylCb.js";import{c as ke}from"./refs-D6FW0B1r.js";import{c as $e}from"./el-button-p68fRgh3.js";const De=(r,f,m,D)=>{const t={offsetX:0,offsetY:0},d=S(!1),y=(l,n)=>{if(r.value){const{offsetX:v,offsetY:g}=t,c=r.value.getBoundingClientRect(),u=c.left,s=c.top,i=c.width,k=c.height,L=document.documentElement.clientWidth,R=document.documentElement.clientHeight,z=-u+v,B=-s+g,X=L-u-i+v,h=R-s-(k<R?k:0)+g;D?.value||(l=Math.min(Math.max(l,z),X),n=Math.min(Math.max(n,B),h)),t.offsetX=l,t.offsetY=n,r.value.style.transform=`translate(${O(l)}, ${O(n)})`}},p=l=>{const n=l.clientX,v=l.clientY,{offsetX:g,offsetY:c}=t,u=i=>{d.value||(d.value=!0);const k=g+i.clientX-n,L=c+i.clientY-v;y(k,L)},s=()=>{d.value=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",s)},a=()=>{f.value&&r.value&&(f.value.addEventListener("mousedown",p),window.addEventListener("resize",E))},w=()=>{f.value&&r.value&&(f.value.removeEventListener("mousedown",p),window.removeEventListener("resize",E))},P=()=>{t.offsetX=0,t.offsetY=0,r.value&&(r.value.style.transform="")},E=()=>{const{offsetX:l,offsetY:n}=t;y(l,n)};return Z(()=>{_(()=>{m.value?a():w()})}),x(()=>{w()}),{isDragging:d,resetPosition:P,updatePosition:E}},Pe=["aria-level"],Te=["aria-label"],Me=["id"],Le=W({name:"ElDialogContent",__name:"dialog-content",props:pe,emits:me,setup(r,{expose:f}){const{t:m}=ee(),{Close:D}=te,t=r,{dialogRef:d,headerRef:y,bodyId:p,ns:a,style:w}=U(J),{focusTrapRef:P}=U(ye),E=ke(P,d),l=F(()=>!!t.draggable),n=F(()=>!!t.overflow),{resetPosition:v,updatePosition:g,isDragging:c}=De(d,y,l,n),u=F(()=>[a.b(),a.is("fullscreen",t.fullscreen),a.is("draggable",l.value),a.is("dragging",c.value),a.is("align-center",!!t.alignCenter),{[a.m("center")]:t.center}]);return f({resetPosition:v,updatePosition:g}),(s,i)=>(M(),N("div",{ref:e(E),class:b(u.value),style:G(e(w)),tabindex:"-1"},[A("header",{ref_key:"headerRef",ref:y,class:b([e(a).e("header"),s.headerClass,{"show-close":s.showClose}])},[$(s.$slots,"header",{},()=>[A("span",{role:"heading","aria-level":s.ariaLevel,class:b(e(a).e("title"))},oe(s.title),11,Pe)]),s.showClose?(M(),N("button",{key:0,"aria-label":e(m)("el.dialog.close"),class:b(e(a).e("headerbtn")),type:"button",onClick:i[0]||(i[0]=k=>s.$emit("close"))},[Y(e(ae),{class:b(e(a).e("close"))},{default:C(()=>[(M(),j(se(s.closeIcon||e(D))))]),_:1},8,["class"])],10,Te)):q("v-if",!0)],2),A("div",{id:e(p),class:b([e(a).e("body"),s.bodyClass])},[$(s.$slots,"default")],10,Me),s.$slots.footer?(M(),N("footer",{key:0,class:b([e(a).e("footer"),s.footerClass])},[$(s.$slots,"footer")],2)):q("v-if",!0)],6))}});var Ie=K(Le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Fe=["aria-label","aria-labelledby","aria-describedby"],Re=W({name:"ElDialog",inheritAttrs:!1,__name:"dialog",props:ge,emits:ve,setup(r,{expose:f}){const m=r,D=le();$e({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},F(()=>!!D.title));const t=ne("dialog"),d=S(),y=S(),p=S(),{visible:a,titleId:w,bodyId:P,style:E,overlayDialogStyle:l,rendered:n,transitionConfig:v,zIndex:g,_draggable:c,_alignCenter:u,_overflow:s,handleClose:i,onModalClick:k,onOpenAutoFocus:L,onCloseAutoFocus:R,onCloseRequested:z,onFocusoutPrevented:B,closing:X}=he(m,d);ue(J,{dialogRef:d,headerRef:y,bodyId:P,ns:t,rendered:n,style:E});const h=Ce(k),Q=F(()=>m.modalPenetrable&&!m.modal&&!m.fullscreen);return f({visible:a,dialogContentRef:p,resetPosition:()=>{var o;(o=p.value)==null||o.resetPosition()},handleClose:i}),(o,T)=>(M(),j(e(Ee),{to:o.appendTo,disabled:o.appendTo!=="body"?!1:!o.appendToBody},{default:C(()=>[Y(re,V(e(v),{persisted:""}),{default:C(()=>{var H;return[ie(Y(e(be),{"custom-mask-event":"",mask:o.modal,"overlay-class":[(H=o.modalClass)!=null?H:"",`${e(t).namespace.value}-modal-dialog`,e(t).is("penetrable",Q.value)],"z-index":e(g)},{default:C(()=>[A("div",{role:"dialog","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:e(w),"aria-describedby":e(P),class:b([`${e(t).namespace.value}-overlay-dialog`,e(t).is("closing",e(X))]),style:G(e(l)),onClick:T[0]||(T[0]=(...I)=>e(h).onClick&&e(h).onClick(...I)),onMousedown:T[1]||(T[1]=(...I)=>e(h).onMousedown&&e(h).onMousedown(...I)),onMouseup:T[2]||(T[2]=(...I)=>e(h).onMouseup&&e(h).onMouseup(...I))},[Y(e(we),{loop:"",trapped:e(a),"focus-start-el":"container",onFocusAfterTrapped:e(L),onFocusAfterReleased:e(R),onFocusoutPrevented:e(B),onReleaseRequested:e(z)},{default:C(()=>[e(n)?(M(),j(Ie,V({key:0,ref_key:"dialogContentRef",ref:p},o.$attrs,{center:o.center,"align-center":e(u),"close-icon":o.closeIcon,draggable:e(c),overflow:e(s),fullscreen:o.fullscreen,"header-class":o.headerClass,"body-class":o.bodyClass,"footer-class":o.footerClass,"show-close":o.showClose,title:o.title,"aria-level":o.headerAriaLevel,onClose:e(i)}),de({header:C(()=>[o.$slots.title?$(o.$slots,"title",{key:1}):$(o.$slots,"header",{key:0,close:e(i),titleId:e(w),titleClass:e(t).e("title")})]),default:C(()=>[$(o.$slots,"default")]),_:2},[o.$slots.footer?{name:"footer",fn:C(()=>[$(o.$slots,"footer")]),key:"0"}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):q("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Fe)]),_:3},8,["mask","overlay-class","z-index"]),[[ce,e(a)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var Se=K(Re,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const je=fe(Se);export{je as E};
