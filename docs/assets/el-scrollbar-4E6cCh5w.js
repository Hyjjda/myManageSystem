import{cp as re,bt as q,b as K,_ as Y,e as U,f as le,u as ae,I as ne,L as $,C as V,o as B,h as I,j as se,a6 as ie,Y as D,Z as ce,m as P,k as C,n as j,a7 as ue,a1 as fe,p as m,br as ve,q as N,g as oe,v as F,$ as me,a as R,d as de,w as G,bj as pe,H as he,N as Z,ao as be,l as ye,r as ge,T as Se,ad as we,t as J,ag as Q,A as ze,B as Ee,D as _e}from"./index-C0YSzdoM.js";import{t as Te}from"./event-DYMifAw6.js";import{u as ke}from"./aria-Cl9uGz3Y.js";var He=/\s/;function Ne(t){for(var n=t.length;n--&&He.test(t.charAt(n)););return n}var Le=/^\s+/;function xe(t){return t&&t.slice(0,Ne(t)+1).replace(Le,"")}var ee=NaN,Ce=/^[-+]0x[0-9a-f]+$/i,Re=/^0b[01]+$/i,Be=/^0o[0-7]+$/i,Pe=parseInt;function Je(t){if(typeof t=="number")return t;if(re(t))return ee;if(q(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=q(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=xe(t);var r=Re.test(t);return r||Be.test(t)?Pe(t.slice(2),r?2:8):Ce.test(t)?ee:+t}const H=4,Oe={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ae=({move:t,size:n,bar:r})=>({[r.size]:n,transform:`translate${r.axis}(${t}%)`}),X=Symbol("scrollbarContextKey"),We=K({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Me="Thumb",$e=U({__name:"thumb",props:We,setup(t){const n=t,r=le(X),o=ae("scrollbar");r||Te(Me,"can not inject scrollbar context");const d=m(),f=m(),S=m({}),y=m(!1);let h=!1,u=!1,p=0,v=0,s=ve?document.onselectstart:null;const l=N(()=>Oe[n.vertical?"vertical":"horizontal"]),a=N(()=>Ae({size:n.size,move:n.move,bar:l.value})),z=N(()=>d.value[l.value.offset]**2/r.wrapElement[l.value.scrollSize]/n.ratio/f.value[l.value.offset]),w=c=>{var b;if(c.stopPropagation(),c.ctrlKey||[1,2].includes(c.button))return;(b=window.getSelection())==null||b.removeAllRanges(),k(c);const E=c.currentTarget;E&&(S.value[l.value.axis]=E[l.value.offset]-(c[l.value.client]-E.getBoundingClientRect()[l.value.direction]))},T=c=>{if(!f.value||!d.value||!r.wrapElement)return;const b=Math.abs(c.target.getBoundingClientRect()[l.value.direction]-c[l.value.client]),E=f.value[l.value.offset]/2,g=(b-E)*100*z.value/d.value[l.value.offset];r.wrapElement[l.value.scroll]=g*r.wrapElement[l.value.scrollSize]/100},k=c=>{c.stopImmediatePropagation(),h=!0,p=r.wrapElement.scrollHeight,v=r.wrapElement.scrollWidth,document.addEventListener("mousemove",O),document.addEventListener("mouseup",L),s=document.onselectstart,document.onselectstart=()=>!1},O=c=>{if(!d.value||!f.value||h===!1)return;const b=S.value[l.value.axis];if(!b)return;const E=(d.value.getBoundingClientRect()[l.value.direction]-c[l.value.client])*-1,g=f.value[l.value.offset]-b,e=(E-g)*100*z.value/d.value[l.value.offset];l.value.scroll==="scrollLeft"?r.wrapElement[l.value.scroll]=e*v/100:r.wrapElement[l.value.scroll]=e*p/100},L=()=>{h=!1,S.value[l.value.axis]=0,document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",L),x(),u&&(y.value=!1)},W=()=>{u=!1,y.value=!!n.size},M=()=>{u=!0,y.value=h};ne(()=>{x(),document.removeEventListener("mouseup",L)});const x=()=>{document.onselectstart!==s&&(document.onselectstart=s)};return $(V(r,"scrollbarElement"),"mousemove",W),$(V(r,"scrollbarElement"),"mouseleave",M),(c,b)=>(B(),I(fe,{name:C(o).b("fade"),persisted:""},{default:se(()=>[ie(D("div",{ref_key:"instance",ref:d,class:P([C(o).e("bar"),C(o).is(l.value.key)]),onMousedown:T,onClick:b[0]||(b[0]=ce(()=>{},["stop"]))},[D("div",{ref_key:"thumb",ref:f,class:P(C(o).e("thumb")),style:j(a.value),onMousedown:w},null,38)],34),[[ue,c.always||y.value]])]),_:1},8,["name"]))}});var te=Y($e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Ie=K({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),De=U({__name:"bar",props:Ie,setup(t,{expose:n}){const r=t,o=le(X),d=m(0),f=m(0),S=m(""),y=m(""),h=m(1),u=m(1);return n({handleScroll:s=>{if(s){const l=s.offsetHeight-H,a=s.offsetWidth-H;f.value=s.scrollTop*100/l*h.value,d.value=s.scrollLeft*100/a*u.value}},update:()=>{const s=o?.wrapElement;if(!s)return;const l=s.offsetHeight-H,a=s.offsetWidth-H,z=l**2/s.scrollHeight,w=a**2/s.scrollWidth,T=Math.max(z,r.minSize),k=Math.max(w,r.minSize);h.value=z/(l-z)/(T/(l-T)),u.value=w/(a-w)/(k/(a-k)),y.value=T+H<l?`${T}px`:"",S.value=k+H<a?`${k}px`:""}}),(s,l)=>(B(),oe(me,null,[F(te,{move:d.value,ratio:u.value,size:S.value,always:s.always},null,8,["move","ratio","size","always"]),F(te,{move:f.value,ratio:h.value,size:y.value,vertical:"",always:s.always},null,8,["move","ratio","size","always"])],64))}});var je=Y(De,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ke=K({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:de([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...ke(["ariaLabel","ariaOrientation"])}),Ye={"end-reached":t=>["left","right","top","bottom"].includes(t),scroll:({scrollTop:t,scrollLeft:n})=>[t,n].every(R)},Ue=["tabindex"],Xe="ElScrollbar",qe=U({name:Xe,__name:"scrollbar",props:Ke,emits:Ye,setup(t,{expose:n,emit:r}){const o=t,d=r,f=ae("scrollbar");let S,y,h,u=0,p=0,v="";const s={bottom:!1,top:!1,right:!1,left:!1},l=m(),a=m(),z=m(),w=m(),T=N(()=>{const e={},i=J(o.height),_=J(o.maxHeight);return i&&(e.height=i),_&&(e.maxHeight=_),[o.wrapStyle,e]}),k=N(()=>[o.wrapClass,f.e("wrap"),{[f.em("wrap","hidden-default")]:!o.native}]),O=N(()=>[f.e("view"),o.viewClass]),L=e=>{var i;return(i=s[e])!=null?i:!1},W={top:"bottom",bottom:"top",left:"right",right:"left"},M=e=>{const i=W[v];if(!i)return;const _=e[v],A=e[i];_&&!s[v]&&(s[v]=!0),!A&&s[i]&&(s[i]=!1)},x=()=>{var e;if(a.value){(e=w.value)==null||e.handleScroll(a.value);const i=u,_=p;u=a.value.scrollTop,p=a.value.scrollLeft;const A={bottom:u+a.value.clientHeight>=a.value.scrollHeight-o.distance,top:u<=o.distance&&i!==0,right:p+a.value.clientWidth>=a.value.scrollWidth-o.distance&&_!==p,left:p<=o.distance&&_!==0};if(d("scroll",{scrollTop:u,scrollLeft:p}),i!==u&&(v=u>i?"bottom":"top"),_!==p&&(v=p>_?"right":"left"),o.distance>0){if(L(v))return;M(A)}A[v]&&d("end-reached",v)}};function c(e,i){we(e)?a.value.scrollTo(e):R(e)&&R(i)&&a.value.scrollTo(e,i)}const b=e=>{R(e)&&(a.value.scrollTop=e)},E=e=>{R(e)&&(a.value.scrollLeft=e)},g=()=>{var e;(e=w.value)==null||e.update(),s[v]=!1};return G(()=>o.noresize,e=>{e?(S?.(),y?.(),h?.()):({stop:S}=Q(z,g),{stop:y}=Q(a,g),h=$("resize",g))},{immediate:!0}),G(()=>[o.maxHeight,o.height],()=>{o.native||Z(()=>{var e;g(),a.value&&((e=w.value)==null||e.handleScroll(a.value))})}),ze(X,Ee({scrollbarElement:l,wrapElement:a})),pe(()=>{a.value&&(a.value.scrollTop=u,a.value.scrollLeft=p)}),he(()=>{o.native||Z(()=>{g()})}),be(()=>g()),n({wrapRef:a,update:g,scrollTo:c,setScrollTop:b,setScrollLeft:E,handleScroll:x}),(e,i)=>(B(),oe("div",{ref_key:"scrollbarRef",ref:l,class:P(C(f).b())},[D("div",{ref_key:"wrapRef",ref:a,class:P(k.value),style:j(T.value),tabindex:e.tabindex,onScroll:x},[(B(),I(ge(e.tag),{id:e.id,ref_key:"resizeRef",ref:z,class:P(O.value),style:j(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:se(()=>[ye(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,Ue),e.native?Se("v-if",!0):(B(),I(je,{key:0,ref_key:"barRef",ref:w,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Ve=Y(qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Qe=_e(Ve);export{Qe as E,Ye as s,Je as t};
