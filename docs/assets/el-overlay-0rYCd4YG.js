import{a$ as w,e as re,u as ie,v as ce,l as q,a5 as de,b as F,d as p,i as fe,bd as ve,bp as ye,p as y,bq as me,w as D,N as ge,H as Ce,W as be,a8 as G,q as i,ad as pe,ae as _e,aG as K,t as Se,br as Ee,bs as xe}from"./index-B3l0UY6M.js";import{P as h}from"./vnode-CxUp6Ur2.js";import{t as Be}from"./el-popper-DFxRylCb.js";import{U as Y}from"./event-rrv98atT.js";import{u as Ie}from"./index-BKZgf7BA.js";import{u as Z}from"./base-B5CqxfD3.js";const Oe=e=>{if(!e)return{onClick:w,onMousedown:w,onMouseup:w};let l=!1,r=!1;return{onClick:a=>{l&&r&&e(a),l=r=!1},onMousedown:a=>{l=a.target===a.currentTarget},onMouseup:a=>{r=a.target===a.currentTarget}}},Te=F({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:p([String,Array,Object])},zIndex:{type:p([String,Number])}}),Ae={click:e=>e instanceof MouseEvent},Me="overlay";var Pe=re({name:"ElOverlay",props:Te,emits:Ae,setup(e,{slots:l,emit:r}){const _=ie(Me),s=E=>{r("click",E)},{onClick:d,onMousedown:a,onMouseup:S}=Oe(e.customMaskEvent?void 0:s);return()=>e.mask?ce("div",{class:[_.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:a,onMouseup:S},[q(l,"default")],h.STYLE|h.CLASS|h.PROPS,["onClick","onMouseup","onMousedown"]):de("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[q(l,"default")])}});const ze=Pe,je=Symbol("dialogInjectionKey"),W="dialog-fade",Le=F({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:fe},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ve={close:()=>!0},Ue=F({...Le,appendToBody:Boolean,appendTo:{type:Be.to.type,default:"body"},beforeClose:{type:p(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:p([String,Object]),default:void 0}}),$e={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Y]:e=>ve(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},qe=(e,l)=>{var r;const s=be().emit,{nextZIndex:d}=ye();let a="";const S=Z(),E=Z(),c=y(!1),x=y(!1),m=y(!1),B=y((r=e.zIndex)!=null?r:d()),g=y(!1);let f,v;const N=me(),J=i(()=>{var o,n;return(n=(o=N.value)==null?void 0:o.namespace)!=null?n:xe}),C=i(()=>{var o;return(o=N.value)==null?void 0:o.dialog}),Q=i(()=>{const o={},n=`--${J.value}-dialog`;if(!e.fullscreen){e.top&&(o[`${n}-margin-top`]=e.top);const t=Se(e.width);t&&(o[`${n}-width`]=t)}return o}),X=i(()=>{var o,n,t;return((t=(n=e.draggable)!=null?n:(o=C.value)==null?void 0:o.draggable)!=null?t:!1)&&!e.fullscreen}),z=i(()=>{var o,n,t;return(t=(n=e.alignCenter)!=null?n:(o=C.value)==null?void 0:o.alignCenter)!=null?t:!1}),H=i(()=>{var o,n,t;return(t=(n=e.overflow)!=null?n:(o=C.value)==null?void 0:o.overflow)!=null?t:!1}),R=i(()=>z.value?{display:"flex"}:{}),ee=i(()=>{var o,n,t;const L=(t=(n=e.transition)!=null?n:(o=C.value)==null?void 0:o.transition)!=null?t:W,se={name:L,onAfterEnter:I,onBeforeLeave:T,onAfterLeave:O};if(pe(L)){const u={...L},k=(b,ue)=>U=>{_e(b)?b.forEach($=>{K($)&&$(U)}):K(b)&&b(U),ue()};return u.onAfterEnter=k(u.onAfterEnter,I),u.onBeforeLeave=k(u.onBeforeLeave,T),u.onAfterLeave=k(u.onAfterLeave,O),u.name||(u.name=W),u}return se});function I(){s("opened")}function O(){s("closed"),s(Y,!1),e.destroyOnClose&&(m.value=!1),g.value=!1}function T(){g.value=!0,s("close")}function j(){v?.(),f?.(),e.openDelay&&e.openDelay>0?{stop:f}=G(()=>V(),e.openDelay):V()}function A(){f?.(),v?.(),e.closeDelay&&e.closeDelay>0?{stop:v}=G(()=>P(),e.closeDelay):P()}function M(){function o(n){n||(x.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(o):A()}function oe(){e.closeOnClickModal&&M()}function V(){Ee&&(c.value=!0)}function P(){c.value=!1}function ne(){s("openAutoFocus")}function le(){s("closeAutoFocus")}function te(o){var n;((n=o.detail)==null?void 0:n.focusReason)==="pointer"&&o.preventDefault()}e.lockScroll&&Ie(c);function ae(){e.closeOnPressEscape&&M()}return D(()=>e.zIndex,()=>{var o;B.value=(o=e.zIndex)!=null?o:d()}),D(()=>e.modelValue,o=>{var n;o?(x.value=!1,g.value=!1,j(),m.value=!0,B.value=(n=e.zIndex)!=null?n:d(),ge(()=>{s("open"),l.value&&(l.value.parentElement.scrollTop=0,l.value.parentElement.scrollLeft=0,l.value.scrollTop=0)})):c.value&&A()}),D(()=>e.fullscreen,o=>{l.value&&(o?(a=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=a)}),Ce(()=>{e.modelValue&&(c.value=!0,m.value=!0,j())}),{afterEnter:I,afterLeave:O,beforeLeave:T,handleClose:M,onModalClick:oe,close:A,doClose:P,onOpenAutoFocus:ne,onCloseAutoFocus:le,onCloseRequested:ae,onFocusoutPrevented:te,titleId:S,bodyId:E,closed:x,style:Q,overlayDialogStyle:R,rendered:m,visible:c,zIndex:B,transitionConfig:ee,_draggable:X,_alignCenter:z,_overflow:H,closing:g}};export{ze as E,Ue as a,Ve as b,Le as c,$e as d,je as e,Oe as f,qe as u};
