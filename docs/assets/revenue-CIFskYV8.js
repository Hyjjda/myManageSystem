import"./base-B5CqxfD3.js";import{v as A}from"./el-loading-Bb2TK8he.js";import{b as F,a as j,E as R}from"./el-table-column-CeBX20pU.js";import{E as U}from"./el-tag-w0K-9l4u.js";import"./el-select-CP9-8Nk3.js";import"./el-scrollbar-CfYoIrbQ.js";import"./el-popper-DFxRylCb.js";import{E as O}from"./el-input-BmUuJNkh.js";import"./el-checkbox-B985glJT.js";/* empty css                   */import{E as $}from"./el-button-p68fRgh3.js";import{E as H,a as M}from"./el-col-BPPw4pF7.js";import{E as q}from"./el-card-DTTG7Cei.js";import{u as G}from"./useChart-DpQ7adxt.js";import{a as J,b as K}from"./station-CnCrkJmg.js";import{B as N,p as b,e as Q,H as W,g as X,v as t,j as o,k as n,Y as e,E as Z,aj as d,a6 as tt,h as et,z as S,O as at,o as k}from"./index-B3l0UY6M.js";import"./typescript-Bp3YSIOJ.js";import"./event-rrv98atT.js";import"./isArrayLikeObject-DtgsmuxI.js";import"./aria-B1-vW8EM.js";import"./omit-bk1FIp6s.js";import"./debounce-CgkEzpOq.js";import"./raf-CqeWbYM1.js";import"./use-form-common-props-BJzakiIG.js";import"./index-Bm7QoMn3.js";import"./index-BVnjknh5.js";import"./_baseFindIndex-D7XfJLKM.js";import"./vnode-CxUp6Ur2.js";function C(f){if(isNaN(f))throw new Error("必须传入一个数字！");const[c,m]=f.toString().split(".");let l="";for(let p=c.length-1;p>=0;p--)l=c[p]+l,(c.length-p)%3===0&&p&&(l=","+l);return m?`${l} + '.' + ${m}`:l}function ot(f,c=10){const m=b(0),l=N({page:1,pageSize:c});return{totals:m,setTotals:_=>{m.value=_},pageInfo:l,handleSizeChange:_=>{l.pageSize=_,f()},handleCurrentChange:_=>{l.page=_,console.log(666,l.page),f()},resetPagination:()=>{l.page=1,l.pageSize=c}}}const lt={class:"title"},st={class:"pic"},nt={class:"total mt"},rt={class:"mr"},it={class:"title"},pt={class:"pic"},dt={class:"total mt"},ct={class:"mr"},ut={class:"title"},mt={class:"pic"},_t={class:"total mt"},gt={class:"mr"},ft={class:"title"},vt={class:"pic"},ht={class:"total mt"},yt={class:"mr"},Ct={class:"title"},bt={class:"pic"},wt={class:"total mt"},xt={class:"mr"},Et={class:"title"},zt={class:"pic"},St={class:"total mt"},kt={class:"mr"},ae=Q({__name:"revenue",setup(f){const c=b(null),m=async()=>{const g=N({tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["销售","收入"]},xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}],yAxis:[{type:"value",name:"销售",min:0,max:50,interval:10,axisLabel:{formatter:"{value} 度"}},{type:"value",name:"收入",min:0,max:50,interval:5,axisLabel:{formatter:"{value}w "}}],series:[{name:"销售",type:"bar",data:[3,6,9,10,12,3,5,10,25,30,20,10]},{name:"收入",type:"line",yAxisIndex:1,data:[10,16,19,26,12,43,35,30,22,33,20,11],smooth:!0}]}),a=await K();return g.series[0].data=a.data.list1,g.series[1].data=a.data.list2,g},l=b([]),p=b(!1),w=b(""),x=async()=>{p.value=!0;const{data:{list:g,total:a}}=await J({page:v.page,pageSize:v.pageSize,name:w.value});_(a),l.value=g,l.value=g.map(r=>({...r,day:r.electricity+r.parkingFee+r.serviceFee+r.member})),E.value=a,p.value=!1},{totals:E,setTotals:_,pageInfo:v,handleSizeChange:T,handleCurrentChange:P}=ot(x);return W(()=>x()),G(c,m),(g,a)=>{const r=at("Document"),h=Z,u=q,y=M,B=H,D=$,I=O,i=j,z=U,L=R,V=F,Y=A;return k(),X("div",null,[t(B,{gutter:20},{default:o(()=>[t(y,{span:4},{default:o(()=>[t(u,null,{default:o(()=>[e("div",lt,[e("div",st,[t(h,null,{default:o(()=>[t(r)]),_:1})]),a[3]||(a[3]=e("h3",null,"今日总收入",-1))]),e("div",nt,[e("h1",rt,d(n(C)(12344)),1),a[4]||(a[4]=e("div",{class:"percent",style:{color:"red"}},"+2%",-1))])]),_:1})]),_:1}),t(y,{span:4},{default:o(()=>[t(u,null,{default:o(()=>[e("div",it,[e("div",pt,[t(h,null,{default:o(()=>[t(r)]),_:1})]),a[5]||(a[5]=e("h3",null,"本月总收入",-1))]),e("div",dt,[e("h1",ct,d(n(C)(1678345)),1),a[6]||(a[6]=e("div",{class:"percent",style:{color:"green"}},"-1%",-1))])]),_:1})]),_:1}),t(y,{span:4},{default:o(()=>[t(u,null,{default:o(()=>[e("div",ut,[e("div",mt,[t(h,null,{default:o(()=>[t(r)]),_:1})]),a[7]||(a[7]=e("h3",null,"会员卡储蓄",-1))]),e("div",_t,[e("h1",gt,d(n(C)(57456)),1),a[8]||(a[8]=e("div",{class:"percent",style:{color:"red"}},"+34%",-1))])]),_:1})]),_:1}),t(y,{span:4},{default:o(()=>[t(u,null,{default:o(()=>[e("div",ft,[e("div",vt,[t(h,null,{default:o(()=>[t(r)]),_:1})]),a[9]||(a[9]=e("h3",null,"服务支出",-1))]),e("div",ht,[e("h1",yt,d(n(C)(4355)),1),a[10]||(a[10]=e("div",{class:"percent",style:{color:"green"}},"-21%",-1))])]),_:1})]),_:1}),t(y,{span:4},{default:o(()=>[t(u,null,{default:o(()=>[e("div",Ct,[e("div",bt,[t(h,null,{default:o(()=>[t(r)]),_:1})]),a[11]||(a[11]=e("h3",null,"电费",-1))]),e("div",wt,[e("h1",xt,d(n(C)(8673)),1),a[12]||(a[12]=e("div",{class:"percent",style:{color:"green"}},"-21%",-1))])]),_:1})]),_:1}),t(y,{span:4},{default:o(()=>[t(u,null,{default:o(()=>[e("div",Et,[e("div",zt,[t(h,null,{default:o(()=>[t(r)]),_:1})]),a[13]||(a[13]=e("h3",null,"个人所得税",-1))]),e("div",St,[e("h1",kt,d(n(C)(1233)),1),a[14]||(a[14]=e("div",{class:"percent",style:{color:"green"}},"-21%",-1))])]),_:1})]),_:1})]),_:1}),t(u,{class:"mt"},{default:o(()=>[e("div",{ref_key:"chartRef",ref:c,style:{width:"100%",height:"400px"}},null,512)]),_:1}),t(u,{class:"mt"},{default:o(()=>[t(I,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=s=>w.value=s),style:{"max-width":"400px"},placeholder:"输入站点名称筛选"},{append:o(()=>[t(D,{icon:"Search",onClick:x})]),_:1},8,["modelValue"]),tt((k(),et(L,{data:l.value,size:"small"},{default:o(()=>[t(i,{type:"index"}),t(i,{prop:"name",label:"名字",width:"180"}),t(i,{prop:"id",label:"ID"}),t(i,{prop:"city",label:"城市"}),t(i,{prop:"count",label:"数量"}),t(i,{prop:"electricity",label:"电费（CNY）"}),t(i,{prop:"parkingFee",label:"停车费（CNY）"}),t(i,{prop:"serviceFee",label:"服务费（CNY）"}),t(i,{prop:"day",label:"日收入（CNY）",sortable:""},{default:o(s=>[e("span",null,d(s.row.day),1),t(z,{class:"ml",type:s.row.percent>0?"danger":"success"},{default:o(()=>[S(d(s.row.percent>0?"+"+s.row.percent+"%":s.row.percent+"%"),1)]),_:2},1032,["type"])]),_:1}),t(i,{prop:"month",label:"月度收入（k）"},{default:o(s=>[e("span",null,d(s.row.month),1),t(z,{class:"ml",type:s.row.mpercent>0?"danger":"success"},{default:o(()=>[S(d(s.row.mpercent>0?"+"+s.row.mpercent+"%":s.row.mpercent+"%"),1)]),_:2},1032,["type"])]),_:1}),t(i,{prop:"member",label:"会员金（CNY）"})]),_:1},8,["data"])),[[Y,p.value]])]),_:1}),t(V,{class:"fr mt mb","current-page":n(v).page,"onUpdate:currentPage":a[1]||(a[1]=s=>n(v).page=s),"page-size":n(v).pageSize,"onUpdate:pageSize":a[2]||(a[2]=s=>n(v).pageSize=s),"page-sizes":[10,20,30],background:"",layout:"total, sizes, prev, pager, next, jumper",total:n(E),onSizeChange:n(T),onCurrentChange:n(P)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])}}});export{ae as default};
